<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>„É¢„Éê„Ç§„É´„Ç™„Éº„ÉÄ„Éº</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding-bottom: 200px;
        }

        .header {
            background: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #667eea;
            font-size: 24px;
            margin-bottom: 5px;
        }

        .store-info {
            color: #666;
            font-size: 13px;
        }

        .menu-container {
            padding: 15px;
        }

        .menu-section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 18px;
            color: white;
            margin-bottom: 12px;
            padding-left: 10px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .menu-item {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .item-name {
            font-size: 17px;
            font-weight: bold;
            color: #333;
        }

        .item-price {
            font-size: 18px;
            color: #667eea;
            font-weight: bold;
        }

        .item-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .quantity-btn {
            width: 50px;
            height: 50px;
            border: none;
            background: #667eea;
            color: white;
            border-radius: 12px;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn:active {
            transform: scale(0.95);
            background: #5568d3;
        }

        .quantity-display {
            min-width: 60px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .cart-summary {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.15);
            z-index: 100;
        }

        .cart-items {
            max-height: 100px;
            overflow-y: auto;
            margin-bottom: 12px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            font-size: 14px;
            color: #333;
        }

        .total-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-top: 2px solid #f0f0f0;
        }

        .total-label {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .total-amount {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .order-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .order-btn:active {
            transform: scale(0.98);
        }

        .order-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .empty-cart {
            text-align: center;
            color: #999;
            padding: 10px;
            font-size: 14px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 90%;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-icon {
            font-size: 70px;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 22px;
            color: #333;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .modal-text {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 15px;
        }

        .order-number {
            font-size: 48px;
            font-weight: bold;
            color: #667eea;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 15px;
        }

        .modal-btn {
            padding: 15px 50px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
        }

        .modal-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üç¥ „É¢„Éê„Ç§„É´„Ç™„Éº„ÉÄ„Éº</h1>
        <div class="store-info">„Çø„ÉÉ„Éó„Åó„Å¶Ê≥®Êñá</div>
    </div>

    <div class="menu-container" id="menuContainer">
        <!-- „É°„Éã„É•„Éº„ÅØÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„Åæ„Åô -->
    </div>

    <div class="cart-summary">
        <div class="cart-items" id="cartItems">
            <div class="empty-cart">„Ç´„Éº„Éà„ÅØÁ©∫„Åß„Åô</div>
        </div>
        <div class="total-section">
            <div class="total-label">ÂêàË®à</div>
            <div class="total-amount">¬•<span id="totalAmount">0</span></div>
        </div>
        <button class="order-btn" id="orderBtn" disabled>Ê≥®Êñá„Åô„Çã</button>
    </div>

    <div class="modal" id="orderModal">
        <div class="modal-content">
            <div class="modal-icon">‚úì</div>
            <div class="modal-title">Ê≥®Êñá„ÇíÂèó„Åë‰ªò„Åë„Åæ„Åó„ÅüÔºÅ</div>
            <div class="modal-text">
                ‰ª•‰∏ã„ÅÆÁï™Âè∑„Åß„ÅäÂëº„Å≥„Åó„Åæ„Åô<br>
                „Åó„Å∞„Çâ„Åè„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ
            </div>
            <div class="order-number" id="orderNumber">001</div>
            <button class="modal-btn" onclick="closeModal()">Èñâ„Åò„Çã</button>
        </div>
    </div>

    <script>
        let cart = {};
        let menuItems = [];

        // „Éá„Éï„Ç©„É´„Éà„É°„Éã„É•„Éº
        const defaultMenu = [
            { id: 1, category: 'food', name: 'ÁÑº„Åç„Åù„Å∞', price: 500 },
            { id: 2, category: 'food', name: '„Åü„ÅìÁÑº„Åç', price: 400 },
            { id: 3, category: 'food', name: '„Éï„É©„É≥„ÇØ„Éï„É´„Éà', price: 300 },
            { id: 4, category: 'food', name: 'ÂîêÊèö„Åí', price: 450 },
            { id: 5, category: 'drink', name: '„Ç≥„Éº„É©', price: 200 },
            { id: 6, category: 'drink', name: '„Ç™„É¨„É≥„Ç∏„Ç∏„É•„Éº„Çπ', price: 200 },
            { id: 7, category: 'drink', name: '„ÅäËå∂', price: 150 }
        ];

        // „É°„Éã„É•„Éº„ÅÆÂàùÊúüÂåñ
        function initMenu() {
            const savedMenu = localStorage.getItem('menuItems');
            if (savedMenu) {
                menuItems = JSON.parse(savedMenu);
            } else {
                menuItems = [...defaultMenu];
                localStorage.setItem('menuItems', JSON.stringify(menuItems));
            }
            renderMenu();
        }

        // „É°„Éã„É•„Éº„ÅÆ„É¨„É≥„ÉÄ„É™„É≥„Ç∞
        function renderMenu() {
            const menuContainer = document.getElementById('menuContainer');
            
            const foodItems = menuItems.filter(item => item.category === 'food');
            const drinkItems = menuItems.filter(item => item.category === 'drink');

            let html = '';

            // „Éï„Éº„Éâ„Çª„ÇØ„Ç∑„Éß„É≥
            if (foodItems.length > 0) {
                html += '<div class="menu-section">';
                html += '<h2 class="section-title">üçú „Éï„Éº„Éâ</h2>';
                foodItems.forEach(item => {
                    html += renderMenuItem(item);
                });
                html += '</div>';
            }

            // „Éâ„É™„É≥„ÇØ„Çª„ÇØ„Ç∑„Éß„É≥
            if (drinkItems.length > 0) {
                html += '<div class="menu-section">';
                html += '<h2 class="section-title">ü•§ „Éâ„É™„É≥„ÇØ</h2>';
                drinkItems.forEach(item => {
                    html += renderMenuItem(item);
                });
                html += '</div>';
            }

            menuContainer.innerHTML = html;
            attachMenuItemEvents();
        }

        // „É°„Éã„É•„Éº„Ç¢„Ç§„ÉÜ„É†„ÅÆHTMLÁîüÊàê
        function renderMenuItem(item) {
            return `
                <div class="menu-item" data-id="${item.id}" data-name="${item.name}" data-price="${item.price}">
                    <div class="item-header">
                        <div class="item-name">${item.name}</div>
                        <div class="item-price">¬•${item.price}</div>
                    </div>
                    <div class="item-controls">
                        <button class="quantity-btn minus">‚àí</button>
                        <div class="quantity-display">0</div>
                        <button class="quantity-btn plus">+</button>
                    </div>
                </div>
            `;
        }

        // „É°„Éã„É•„Éº„Ç¢„Ç§„ÉÜ„É†„ÅÆ„Ç§„Éô„É≥„ÉàË®≠ÂÆö
        function attachMenuItemEvents() {
            document.querySelectorAll('.menu-item').forEach(item => {
                const plusBtn = item.querySelector('.plus');
                const minusBtn = item.querySelector('.minus');
                const quantityDisplay = item.querySelector('.quantity-display');
                const itemId = item.dataset.id;
                const itemName = item.dataset.name;
                const itemPrice = parseInt(item.dataset.price);

                plusBtn.addEventListener('click', () => {
                    let quantity = parseInt(quantityDisplay.textContent);
                    quantity++;
                    quantityDisplay.textContent = quantity;
                    updateCart(itemId, itemName, itemPrice, quantity);
                });

                minusBtn.addEventListener('click', () => {
                    let quantity = parseInt(quantityDisplay.textContent);
                    if (quantity > 0) {
                        quantity--;
                        quantityDisplay.textContent = quantity;
                        updateCart(itemId, itemName, itemPrice, quantity);
                    }
                });
            });
        }

        // LocalStorage„Åã„ÇâÊ≥®Êñá„Éá„Éº„Çø„ÇíÂèñÂæó„Åæ„Åü„ÅØÂàùÊúüÂåñ
        function getOrders() {
            const orders = localStorage.getItem('orders');
            return orders ? JSON.parse(orders) : [];
        }

        function saveOrder(orderData) {
            const orders = getOrders();
            orders.push(orderData);
            localStorage.setItem('orders', JSON.stringify(orders));
        }

        function getNextOrderNumber() {
            const orders = getOrders();
            return orders.length + 1;
        }

        function updateCart(id, name, price, quantity) {
            if (quantity > 0) {
                cart[id] = { name, price, quantity };
            } else {
                delete cart[id];
            }
            renderCart();
        }

        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            const totalAmount = document.getElementById('totalAmount');
            const orderBtn = document.getElementById('orderBtn');

            if (Object.keys(cart).length === 0) {
                cartItems.innerHTML = '<div class="empty-cart">„Ç´„Éº„Éà„ÅØÁ©∫„Åß„Åô</div>';
                totalAmount.textContent = '0';
                orderBtn.disabled = true;
                return;
            }

            let html = '';
            let total = 0;

            for (const [id, item] of Object.entries(cart)) {
                const subtotal = item.price * item.quantity;
                total += subtotal;
                html += `
                    <div class="cart-item">
                        <span>${item.name} √ó ${item.quantity}</span>
                        <span>¬•${subtotal.toLocaleString()}</span>
                    </div>
                `;
            }

            cartItems.innerHTML = html;
            totalAmount.textContent = total.toLocaleString();
            orderBtn.disabled = false;
        }

        // Ê≥®ÊñáÂá¶ÁêÜ
        document.getElementById('orderBtn').addEventListener('click', () => {
            const orderNumber = getNextOrderNumber();
            const orderData = {
                number: orderNumber,
                items: { ...cart },
                total: Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0),
                timestamp: new Date().toISOString(),
                status: 'pending' // pending, preparing, ready, completed
            };

            saveOrder(orderData);

            document.getElementById('orderNumber').textContent = String(orderNumber).padStart(3, '0');
            document.getElementById('orderModal').classList.add('active');
            
            // „Ç´„Éº„Éà„Çí„É™„Çª„ÉÉ„Éà
            cart = {};
            document.querySelectorAll('.quantity-display').forEach(display => {
                display.textContent = '0';
            });
            renderCart();
        });

        function closeModal() {
            document.getElementById('orderModal').classList.remove('active');
        }

        // „É¢„Éº„ÉÄ„É´Â§ñ„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
        document.getElementById('orderModal').addEventListener('click', (e) => {
            if (e.target.id === 'orderModal') {
                closeModal();
            }
        });

        // „É°„Éã„É•„ÉºÂ§âÊõ¥Ê§úÁü•Ôºàstorage „Ç§„Éô„É≥„ÉàÔºâ
        window.addEventListener('storage', (e) => {
            if (e.key === 'menuItems') {
                initMenu();
            }
        });

        // ÂàùÊúüÂåñ
        initMenu();
    </script>
</body>
</html>
